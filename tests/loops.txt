======== SOURCE ========
fn(): uint {
    return fib(10)
}
======== UNSCHEDULED SON ========
%0 = Start: idpth: 0 [, %1]
%2 = CInt: 10 [, %3]
%1 = Entry: idpth: 0, %0 [, %3]
%3 = Call: fn1, idpth: 0, %1, %2 [, %4]
%5 = Ret: %4 [, %6]
%4 = CallEnd: idpth: 0, %3 [, %5, %6]
%6 = Return: idpth: 0, %4, %5 []

======== OPTIMIZED SON ========
%0 = Start: idpth: 0 [, %1]
%2 = CInt: 10 [, %3]
%1 = Entry: idpth: 0, %0 [, %3]
%3 = Call: fn1, idpth: 0, %1, %2 [, %4]
%5 = Ret: %4 [, %6]
%4 = CallEnd: idpth: 0, %3 [, %5, %6]
%6 = Return: idpth: 0, %4, %5 []

======== SCHEDULED SON ========
%0 = Start: idpth: 0
%1 = Entry: idpth: 0, %0
  %2 = CInt: 10
  %3 = Call: fn1, idpth: 0, %2
%4 = CallEnd: idpth: 0, %3
  %5 = Ret
  %6 = Return: idpth: 0, %5

======== REGISTER SELECTION ========
{ 1, 1, 1, 1 }

======== SOURCE ========
fn(n: uint): uint {
    b := 1
    a := 0
    loop {
        if n == 0 break
        c := a + b
        a = b
        b = c
        n -= 1
        continue
    }
    return a
}
======== UNSCHEDULED SON ========
%13 = Jmp: idpth: 0 [, %15]
%19 = CInt: 1 [, %20]
%22 = Jmp: idpth: 0 [, %23]
%21 = Jmp: idpth: 0, %15 [, %23]
%0 = Start: idpth: 0 [, %1, %2]
%15 = Region: idpth: 0, %13, %14 [, %21]
%20 = BinOp: -, %7, %19 [, %7]
%1 = Arg: 0, %0 [, %7]
%23 = Region: idpth: 0, %21, %22 [, %24]
%2 = Entry: idpth: 0, %0 [, %5]
%14 = Jmp: idpth: 0, %12 [, %15]
%8 = CInt: 0 [, %9]
%3 = CInt: 1 [, %17]
%7 = Phi: %6, %1, %20 [, %9, %20]
%24 = Jmp: idpth: 0, %23 [, %6]
%5 = Jmp: idpth: 0, %2 [, %6]
%12 = Else: idpth: 0, %10 [, %14]
%9 = BinOp: ==, %7, %8 [, %10]
%18 = BinOp: +, %16, %17 [, %17]
%17 = Phi: %6, %3, %18 [, %18, %16]
%4 = CInt: 0 [, %16]
%6 = Loop: idpth: 0, %5, %24 [, %7, %10, %16, %17]
%10 = If: swapped: false, idpth: 0, %6, %9 [, %11, %12]
%16 = Phi: %6, %4, %17 [, %18, %25]
%11 = Then: idpth: 0, %10 [, %25]
%25 = Return: idpth: 0, %11, %16 []

======== OPTIMIZED SON ========
%0 = Start: idpth: 0 [, %1, %2]
%26 = ImmBinOp: addi64(-1), %7 [, %7]
%1 = Arg: 0, %0 [, %7]
%2 = Entry: idpth: 0, %0 [, %5]
%8 = CInt: 0 [, %27]
%3 = CInt: 1 [, %17]
%7 = Phi: %6, %1, %26 [, %27, %26]
%24 = Jmp: idpth: 0, %12 [, %6]
%5 = Jmp: idpth: 0, %2 [, %6]
%12 = Else: idpth: 0, %10 [, %24]
%27 = CondOp: jne, %7, %8 [, %10]
%18 = BinOp: +, %16, %17 [, %17]
%17 = Phi: %6, %3, %18 [, %18, %16]
%4 = CInt: 0 [, %16]
%6 = Loop: idpth: 0, %5, %24 [, %7, %10, %16, %17]
%10 = If: swapped: false, idpth: 0, %6, %27 [, %11, %12]
%16 = Phi: %6, %4, %17 [, %18, %25]
%11 = Then: idpth: 0, %10 [, %25]
%25 = Return: idpth: 0, %11, %16 []

======== SCHEDULED SON ========
%0 = Start: idpth: 0
%2 = Entry: idpth: 1, %0
  %1 = Arg: 0
  %4 = CInt: 0
  %3 = CInt: 1
  %8 = CInt: 0
  %5 = Jmp: idpth: 2
%6 = Loop: idpth: 3, %5, %24
  %7 = Phi: %1, %26
  %16 = Phi: %4, %17
  %17 = Phi: %3, %18
  %27 = CondOp: jne, %7, %8
  %10 = If: swapped: false, idpth: 4, %27
%11 = Then: idpth: 0, %10
  %25 = Return: idpth: 0, %16
%12 = Else: idpth: 5, %10
  %18 = BinOp: +, %16, %17
  %26 = ImmBinOp: addi64(-1), %7
  %24 = Jmp: idpth: 6

======== REGISTER SELECTION ========
{ 1, 2, 3, 4, 1, 5, 6, 7, 8, 1, 1, 8, 5, 1 }

======== CODEGEN ========
main:
       li64 $32, 10
         cp $2, $32
        jal $31, $0, :fib
         cp $32, $1
         cp $1, $32
         tx
fib:
         cp $13, $2
       li64 $14, 0
       li64 $15, 1
       li64 $16, 0
         cp $17, $13
         cp $18, $14
         cp $19, $15
2:      jne $17, $16, :1
         cp $1, $18
       jala $0, $31, 0
1:    add64 $20, $18, $19
     addi64 $17, $17, -1
         cp $18, $19
         cp $19, $20
        jmp :2

======== EXECUTION ========
    li64 $32=0, 10
      cp $2=0, $32=10
     jal $31=0, $0=0, 14
      cp $13=0, $2=10
    li64 $14=0, 0
    li64 $15=0, 1
    li64 $16=0, 0
      cp $17=0, $13=10
      cp $18=0, $14=0
      cp $19=0, $15=1
     jne $17=10, $16=0, 19
   add64 $20=0, $18=0, $19=1
  addi64 $17=10, $17, -1
      cp $18=0, $19=1
      cp $19=1, $20=1
     jmp -40
     jne $17=9, $16=0, 19
   add64 $20=1, $18=1, $19=1
  addi64 $17=9, $17, -1
      cp $18=1, $19=1
      cp $19=1, $20=2
     jmp -40
     jne $17=8, $16=0, 19
   add64 $20=2, $18=1, $19=2
  addi64 $17=8, $17, -1
      cp $18=1, $19=2
      cp $19=2, $20=3
     jmp -40
     jne $17=7, $16=0, 19
   add64 $20=3, $18=2, $19=3
  addi64 $17=7, $17, -1
      cp $18=2, $19=3
      cp $19=3, $20=5
     jmp -40
     jne $17=6, $16=0, 19
   add64 $20=5, $18=3, $19=5
  addi64 $17=6, $17, -1
      cp $18=3, $19=5
      cp $19=5, $20=8
     jmp -40
     jne $17=5, $16=0, 19
   add64 $20=8, $18=5, $19=8
  addi64 $17=5, $17, -1
      cp $18=5, $19=8
      cp $19=8, $20=13
     jmp -40
     jne $17=4, $16=0, 19
   add64 $20=13, $18=8, $19=13
  addi64 $17=4, $17, -1
      cp $18=8, $19=13
      cp $19=13, $20=21
     jmp -40
     jne $17=3, $16=0, 19
   add64 $20=21, $18=13, $19=21
  addi64 $17=3, $17, -1
      cp $18=13, $19=21
      cp $19=21, $20=34
     jmp -40
     jne $17=2, $16=0, 19
   add64 $20=34, $18=21, $19=34
  addi64 $17=2, $17, -1
      cp $18=21, $19=34
      cp $19=34, $20=55
     jmp -40
     jne $17=1, $16=0, 19
   add64 $20=55, $18=34, $19=55
  addi64 $17=1, $17, -1
      cp $18=34, $19=55
      cp $19=55, $20=89
     jmp -40
     jne $17=0, $16=0, 19
      cp $1=0, $18=55
    jala $0=0, $31=20, 0
      cp $32=10, $1=55
      cp $1=55, $32=55
      tx