======== SOURCE ========
fn(): int {
	a := Ty.{a: 0, b: 0, c: 0}
	b := Ty.{a: 1, b: 1, c: 1}
	swap(&a, &b)
	return a.a + a.b + a.c
}
======== UNSCHEDULED SON ========
%5 = CInt: 0 [, %6, %9, %12]
%10 = CInt: 16 [, %11, %18]
%7 = CInt: 8 [, %8, %16]
%16 = BinOp: iadd, %13, %7 [, %17]
%2 = Mem: %0 [, %6, %4, %13]
%14 = CInt: 1 [, %15, %17, %19]
%18 = BinOp: iadd, %13, %10 [, %19]
%17 = Store: %1, %15, %16, %14 [, %19]
%15 = Store: %1, %12, %13, %14 [, %17]
%12 = Store: %1, %9, %11, %5 [, %15]
%9 = Store: %1, %6, %8, %5 [, %12]
%6 = Store: %1, %2, %4, %5 [, %9]
%0 = Start: idepth: 0 [, %1, %2]
%11 = BinOp: iadd, %4, %10 [, %12, %26]
%8 = BinOp: iadd, %4, %7 [, %9, %24]
%13 = Local: 24, %2 [, %15, %16, %18, %20]
%4 = Local: 24, %2 [, %6, %8, %11, %23, %20]
%19 = Store: %1, %17, %18, %14 [, %20]
%1 = Entry: idepth: 0, %0 [, %20, %6, %9, %12, %15, %17, %19]
%25 = BinOp: iadd, %23, %24 [, %27]
%26 = Load: %22, %11 [, %27]
%24 = Load: %22, %8 [, %25]
%23 = Load: %22, %4 [, %25]
%20 = Call: ret_count: 0, id: 1, idepth: 0, %1, %19, %4, %13 [, %21]
%27 = BinOp: iadd, %25, %26 [, %28]
%22 = Mem: %21 [, %28, %23, %24, %26]
%21 = CallEnd: idepth: 0, %20 [, %28, %22]
%28 = Return: idepth: 0, %21, %22, %27 []

======== OPTIMIZED SON ========
%5 = CInt: 0 [, %6, %35, %33]
%2 = Mem: %0 [, %6, %4, %13]
%14 = CInt: 1 [, %15, %31, %36]
%31 = St: offset: 8, %1, %15, %13, %14 [, %36]
%15 = Store: %1, %33, %13, %14 [, %31]
%33 = St: offset: 16, %1, %35, %4, %5 [, %15]
%35 = St: offset: 8, %1, %6, %4, %5 [, %33]
%6 = Store: %1, %2, %4, %5 [, %35]
%0 = Start: idepth: 0 [, %1, %2]
%13 = Local: 24, %2 [, %15, %31, %36, %20]
%4 = Local: 24, %2 [, %6, %38, %37, %23, %20, %33, %35]
%36 = St: offset: 16, %1, %31, %13, %14 [, %20]
%1 = Entry: idepth: 0, %0 [, %6, %35, %33, %15, %31, %36, %20]
%25 = BinOp: iadd, %23, %38 [, %27]
%37 = Ld: offset: 16, %22, %4 [, %27]
%38 = Ld: offset: 8, %22, %4 [, %25]
%23 = Load: %22, %4 [, %25]
%20 = Call: ret_count: 0, id: 1, idepth: 0, %1, %36, %4, %13 [, %21]
%27 = BinOp: iadd, %25, %37 [, %28]
%22 = Mem: %21 [, %28, %23, %38, %37]
%21 = CallEnd: idepth: 0, %20 [, %22, %28]
%28 = Return: idepth: 0, %21, %22, %27 []

======== SCHEDULED SON ========
%0 = Start: idepth: 0
%1 = Entry: idepth: 1, %0
  %5 = CInt: 0
  %14 = CInt: 1
  %13 = Local: 24, %2
  %4 = Local: 24, %2
  %6 = Store: %2, %4, %5
  %35 = St: offset: 8, %6, %4, %5
  %33 = St: offset: 16, %35, %4, %5
  %15 = Store: %33, %13, %14
  %31 = St: offset: 8, %15, %13, %14
  %36 = St: offset: 16, %31, %13, %14
  %20 = Call: ret_count: 0, id: 1, idepth: 2, %36, %4, %13
%21 = CallEnd: idepth: 3, %20
  %22 = Mem
  %23 = Load: %22, %4
  %38 = Ld: offset: 8, %22, %4
  %37 = Ld: offset: 16, %22, %4
  %25 = BinOp: iadd, %23, %38
  %27 = BinOp: iadd, %25, %37
  %28 = Return: idepth: 0, %22, %27

======== SOURCE ========
fn(a: ^Ty, b: ^Ty): void {
	tmp := *a;
	*a = *b;
	*b = tmp
}
======== UNSCHEDULED SON ========
%15 = Load: %13, %8 [, %16]
%14 = Load: %13, %5 [, %16]
%11 = Load: %9, %5 [, %13]
%8 = Local: 8, %2 [, %9, %17, %15]
%5 = Local: 8, %2 [, %6, %14, %11]
%7 = Arg: 1, %0 [, %9]
%4 = Arg: 0, %0 [, %6]
%2 = Mem: %0 [, %6, %5, %8, %10]
%12 = CInt: 24 [, %13, %16, %18]
%10 = Local: 24, %2 [, %13, %18]
%17 = Load: %16, %8 [, %18]
%16 = MemCpy: %1, %13, %14, %15, %12 [, %18, %17]
%13 = MemCpy: %1, %9, %10, %11, %12 [, %16, %14, %15]
%9 = Store: %1, %6, %8, %7 [, %13, %11]
%6 = Store: %1, %2, %5, %4 [, %9]
%0 = Start: idepth: 0 [, %1, %2, %4, %7]
%18 = MemCpy: %1, %16, %17, %10, %12 [, %19]
%1 = Entry: idepth: 0, %0 [, %19, %6, %9, %13, %16, %18]
%19 = Return: idepth: 0, %1, %18 []

======== OPTIMIZED SON ========
%4 = Arg: 0, %0 [, %20, %21]
%2 = Mem: %0 [, %21, %10]
%10 = Local: 24, %2 [, %21, %22]
%7 = Arg: 1, %0 [, %22, %20]
%20 = BlockCpy: size: 24, %1, %21, %4, %7 [, %22]
%21 = BlockCpy: size: 24, %1, %2, %10, %4 [, %20]
%0 = Start: idepth: 0 [, %1, %2, %4, %7]
%22 = BlockCpy: size: 24, %1, %20, %7, %10 [, %19]
%1 = Entry: idepth: 0, %0 [, %19, %22, %21, %20]
%19 = Return: idepth: 0, %1, %22 []

======== SCHEDULED SON ========
%0 = Start: idepth: 0
%1 = Entry: idepth: 1, %0
  %4 = Arg: 0
  %7 = Arg: 1
  %10 = Local: 24, %2
  %21 = BlockCpy: size: 24, %2, %10, %4
  %20 = BlockCpy: size: 24, %21, %4, %7
  %22 = BlockCpy: size: 24, %20, %7, %10
  %19 = Return: idepth: 0, %22

======== CODEGEN ========
main:
         st $31, $254, -40, 40
     addi64 $254, $254, -88
       li64 $32, 0
       li64 $33, 1
     addi64 $34, $254, 24
     addi64 $35, $254, 0
         st $32, $254, 0, 8
         st $32, $254, 8, 8
         st $32, $254, 16, 8
         st $33, $254, 24, 8
         st $33, $254, 32, 8
         st $33, $254, 40, 8
         cp $1, $35
         cp $2, $34
        jal $31, $0, :swap
         ld $32, $254, 0, 8
         ld $33, $254, 8, 8
         ld $34, $254, 16, 8
      add64 $32, $32, $33
      add64 $32, $32, $34
         cp $1, $32
     addi64 $254, $254, 88
         ld $31, $254, -40, 40
         tx
swap:
     addi64 $254, $254, -24
         cp $13, $1
         cp $14, $2
     addi64 $15, $254, 0
        bmc $13, $15, 24
        bmc $14, $13, 24
        bmc $15, $14, 24
     addi64 $254, $254, 24
       jala $0, $31, 0

======== EXECUTION ========
      st $31=0, $254=10240, -40, 40
  addi64 $254=10240, $254, -88
    li64 $32=0, 0
    li64 $33=0, 1
  addi64 $34=0, $254=10152, 24
  addi64 $35=0, $254=10152, 0
      st $32=0, $254=10152, 0, 8
      st $32=0, $254=10152, 8, 8
      st $32=0, $254=10152, 16, 8
      st $33=1, $254=10152, 24, 8
      st $33=1, $254=10152, 32, 8
      st $33=1, $254=10152, 40, 8
      cp $1=0, $35=10152
      cp $2=0, $34=10176
     jal $31=0, $0=0, 82
  addi64 $254=10152, $254, -24
      cp $13=0, $1=10152
      cp $14=0, $2=10176
  addi64 $15=0, $254=10128, 0
     bmc $13=10152, $15=10128, 24
     bmc $14=10176, $13=10152, 24
     bmc $15=10128, $14=10176, 24
  addi64 $254=10128, $254, 24
    jala $0=0, $31=157, 0
      ld $32=0, $254=10152, 0, 8
      ld $33=1, $254=10152, 8, 8
      ld $34=10176, $254=10152, 16, 8
   add64 $32=1, $32, $33=1
   add64 $32=2, $32, $34=1
      cp $1=10152, $32=3
  addi64 $254=10152, $254, 88
      ld $31=157, $254=10240, -40, 40
      tx