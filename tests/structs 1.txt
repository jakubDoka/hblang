======== SOURCE ========
fn(): int {
	finst := Ty2.{ty: Ty.{a: 4, b: 1}, c: 3}
	inst := odher_pass(finst)
	if inst.c != 3 {
		return 0
	}
	if sum(inst.ty) != 0 {
		return 100
	}
	return pass(&inst.ty)
}
======== UNSCHEDULED SON ========
%9 = CInt: 1 [, %10]
%5 = CInt: 4 [, %6]
%8 = BinOp: iadd, %4, %7 [, %10]
%12 = BinOp: iadd, %4, %11 [, %14]
%10 = Store: %1, %6, %8, %9 [, %14]
%6 = Store: %1, %2, %4, %5 [, %10]
%0 = Start: idepth: 0 [, %1, %2]
%7 = CInt: 8 [, %8, %29]
%13 = CInt: 3 [, %14, %21]
%11 = CInt: 16 [, %12, %19]
%4 = Local: 24, %2 [, %6, %8, %12, %16]
%14 = Store: %1, %10, %12, %13 [, %16]
%1 = Entry: idepth: 0, %0 [, %16, %6, %10, %14]
%2 = Mem: %0 [, %6, %4, %15]
%34 = Ret: 0, %32 [, %35]
%37 = If: idepth: 0, %32, %35 [, %38, %45]
%29 = BinOp: iadd, %15, %7 [, %30]
%27 = Then: idepth: 0, %23 [, %31]
%21 = BinOp: ne, %20, %13 [, %23]
%19 = BinOp: iadd, %15, %11 [, %20]
%23 = If: idepth: 0, %17, %21 [, %24, %27]
%16 = Call: ret_count: 0, id: 1, idepth: 0, %1, %14, %15, %4 [, %17]
%15 = Local: 24, %2 [, %16, %46, %19, %28, %29]
%45 = Then: idepth: 0, %37 [, %46]
%38 = Then: idepth: 0, %37 [, %41]
%24 = Then: idepth: 0, %23 [, %40]
%35 = BinOp: ne, %34, %25 [, %37]
%32 = CallEnd: idepth: 0, %31 [, %37, %33, %34]
%30 = Load: %18, %29 [, %31]
%28 = Load: %18, %15 [, %31]
%31 = Call: ret_count: 1, id: 2, idepth: 0, %27, %18, %28, %30 [, %32]
%20 = Load: %18, %19 [, %21]
%17 = CallEnd: idepth: 0, %16 [, %23, %18]
%46 = Call: ret_count: 1, id: 3, idepth: 0, %45, %33, %15 [, %47]
%41 = Jmp: idepth: 0, %38 [, %42]
%40 = Jmp: idepth: 0, %24 [, %42]
%39 = CInt: 100 [, %44]
%25 = CInt: 0 [, %44, %35]
%33 = Mem: %32 [, %43, %46]
%18 = Mem: %17 [, %43, %20, %31, %28, %30]
%47 = CallEnd: idepth: 0, %46 [, %51, %48, %49]
%42 = Region: idepth: 0, %40, %41 [, %50, %43, %44]
%49 = Ret: 0, %47 [, %54]
%44 = Phi: %42, %25, %39 [, %54]
%48 = Mem: %47 [, %53]
%43 = Phi: %42, %18, %33 [, %53]
%51 = Jmp: idepth: 0, %47 [, %52]
%50 = Jmp: idepth: 0, %42 [, %52]
%54 = Phi: %52, %44, %49 [, %26]
%53 = Phi: %52, %43, %48 [, %26]
%52 = Region: idepth: 0, %50, %51 [, %26, %53, %54]
%26 = Return: idepth: 0, %52, %53, %54 []

======== OPTIMIZED SON ========
%9 = CInt: 1 [, %57]
%5 = CInt: 4 [, %6]
%57 = St: offset: 8, %1, %6, %4, %9 [, %58]
%6 = Store: %1, %2, %4, %5 [, %57]
%0 = Start: idepth: 0 [, %1, %2]
%13 = CInt: 3 [, %58, %62]
%4 = Local: 24, %2 [, %6, %57, %58, %16]
%58 = St: offset: 16, %1, %57, %4, %13 [, %16]
%1 = Entry: idepth: 0, %0 [, %6, %57, %58, %16]
%2 = Mem: %0 [, %6, %4, %15]
%34 = Ret: 0, %32 [, %59]
%27 = Then: idepth: 0, %62 [, %31]
%62 = IfOp: swapped: false, op: jeq, idepth: 0, %17, %64, %13 [, %24, %27]
%16 = Call: ret_count: 0, id: 1, idepth: 0, %1, %58, %15, %4 [, %17]
%15 = Local: 24, %2 [, %16, %46, %64, %28, %63]
%45 = Then: idepth: 0, %59 [, %46]
%38 = Then: idepth: 0, %59 [, %41]
%24 = Then: idepth: 0, %62 [, %40]
%59 = IfOp: swapped: false, op: jeq, idepth: 0, %32, %34, %25 [, %38, %45]
%32 = CallEnd: idepth: 0, %31 [, %33, %34, %59]
%63 = Ld: offset: 8, %18, %15 [, %31]
%28 = Load: %18, %15 [, %31]
%31 = Call: ret_count: 1, id: 2, idepth: 0, %27, %18, %28, %63 [, %32]
%64 = Ld: offset: 16, %18, %15 [, %62]
%17 = CallEnd: idepth: 0, %16 [, %18, %62]
%46 = Call: ret_count: 1, id: 3, idepth: 0, %45, %33, %15 [, %47]
%41 = Jmp: idepth: 0, %38 [, %42]
%40 = Jmp: idepth: 0, %24 [, %42]
%39 = CInt: 100 [, %44]
%25 = CInt: 0 [, %44, %59]
%33 = Mem: %32 [, %43, %46]
%18 = Mem: %17 [, %43, %64, %31, %28, %63]
%47 = CallEnd: idepth: 0, %46 [, %48, %49, %51]
%42 = Region: idepth: 0, %40, %41 [, %43, %44, %50]
%49 = Ret: 0, %47 [, %54]
%44 = Phi: %42, %25, %39 [, %54]
%48 = Mem: %47 [, %53]
%43 = Phi: %42, %18, %33 [, %53]
%51 = Jmp: idepth: 0, %47 [, %52]
%50 = Jmp: idepth: 0, %42 [, %52]
%54 = Phi: %52, %44, %49 [, %26]
%53 = Phi: %52, %43, %48 [, %26]
%52 = Region: idepth: 0, %50, %51 [, %53, %54, %26]
%26 = Return: idepth: 0, %52, %53, %54 []

======== SCHEDULED SON ========
%0 = Start: idepth: 0
%1 = Entry: idepth: 1, %0
  %5 = CInt: 4
  %9 = CInt: 1
  %13 = CInt: 3
  %4 = Local: 24, %2
  %6 = Store: %2, %4, %5
  %57 = St: offset: 8, %6, %4, %9
  %58 = St: offset: 16, %57, %4, %13
  %15 = Local: 24, %2
  %16 = Call: ret_count: 0, id: 1, idepth: 2, %58, %15, %4
%17 = CallEnd: idepth: 3, %16
  %18 = Mem
  %25 = CInt: 0
  %64 = Ld: offset: 16, %18, %15
  %28 = Load: %18, %15
  %63 = Ld: offset: 8, %18, %15
  %62 = IfOp: swapped: false, op: jeq, idepth: 4, %64, %13
%24 = Then: idepth: 5, %62
  %65 = MachMove: %25
  %40 = Jmp: idepth: 6
%27 = Then: idepth: 5, %62
  %31 = Call: ret_count: 1, id: 2, idepth: 6, %18, %28, %63
%32 = CallEnd: idepth: 7, %31
  %33 = Mem
  %34 = Ret: 0
  %59 = IfOp: swapped: false, op: jeq, idepth: 8, %34, %25
%38 = Then: idepth: 9, %59
  %39 = CInt: 100
  %66 = MachMove: %39
  %41 = Jmp: idepth: 10
%42 = Region: idepth: 7, %40, %41
  %43 = Phi: %18, %33
  %67 = Phi: %65, %66
  %68 = MachMove: %67
  %50 = Jmp: idepth: 8
%45 = Then: idepth: 9, %59
  %46 = Call: ret_count: 1, id: 3, idepth: 10, %33, %15
%47 = CallEnd: idepth: 11, %46
  %48 = Mem
  %49 = Ret: 0
  %69 = MachMove: %49
  %51 = Jmp: idepth: 12
%52 = Region: idepth: 0, %50, %51
  %53 = Phi: %43, %48
  %70 = Phi: %68, %69
  %26 = Return: idepth: 0, %53, %70

======== SOURCE ========
fn(t: ^Ty): int {
	t.a -= 1
	t.a += 1
	return t.a - t.b
}
======== UNSCHEDULED SON ========
%17 = CInt: 8 [, %18]
%18 = BinOp: iadd, %16, %17 [, %20]
%8 = CInt: 1 [, %10, %14]
%13 = Load: %11, %12 [, %14]
%10 = BinOp: isub, %9, %8 [, %11]
%9 = Load: %6, %7 [, %10]
%7 = Load: %6, %5 [, %9, %11]
%5 = Local: 8, %2 [, %6, %16, %7, %12]
%4 = Arg: 0, %0 [, %6]
%2 = Mem: %0 [, %6, %5]
%20 = Load: %15, %18 [, %21]
%19 = Load: %15, %16 [, %21]
%16 = Load: %15, %5 [, %18, %19]
%14 = BinOp: iadd, %13, %8 [, %15]
%12 = Load: %11, %5 [, %13, %15]
%11 = Store: %1, %6, %7, %10 [, %15, %12, %13]
%6 = Store: %1, %2, %5, %4 [, %11, %7, %9]
%0 = Start: idepth: 0 [, %1, %2, %4]
%21 = BinOp: isub, %19, %20 [, %22]
%15 = Store: %1, %11, %12, %14 [, %22, %16, %19, %20]
%1 = Entry: idepth: 0, %0 [, %22, %6, %11, %15]
%22 = Return: idepth: 0, %1, %15, %21 []

======== OPTIMIZED SON ========
%9 = Load: %2, %4 [, %24]
%13 = Load: %11, %4 [, %26]
%24 = ImmBinOp: imm: -1, op: addi64, %9 [, %11]
%2 = Mem: %0 [, %9, %11]
%19 = Load: %15, %4 [, %21]
%25 = Ld: offset: 8, %15, %4 [, %21]
%26 = ImmBinOp: imm: 1, op: addi64, %13 [, %15]
%4 = Arg: 0, %0 [, %19, %9, %11, %13, %15, %25]
%11 = Store: %1, %2, %4, %24 [, %15, %13]
%0 = Start: idepth: 0 [, %1, %2, %4]
%21 = BinOp: isub, %19, %25 [, %22]
%15 = Store: %1, %11, %4, %26 [, %22, %25, %19]
%1 = Entry: idepth: 0, %0 [, %22, %11, %15]
%22 = Return: idepth: 0, %1, %15, %21 []

======== SCHEDULED SON ========
%0 = Start: idepth: 0
%1 = Entry: idepth: 1, %0
  %4 = Arg: 0
  %9 = Load: %2, %4
  %24 = ImmBinOp: imm: -1, op: addi64, %9
  %11 = Store: %2, %4, %24, %9
  %13 = Load: %11, %4
  %26 = ImmBinOp: imm: 1, op: addi64, %13
  %15 = Store: %11, %4, %26, %13
  %19 = Load: %15, %4
  %25 = Ld: offset: 8, %15, %4
  %21 = BinOp: isub, %19, %25
  %22 = Return: idepth: 0, %15, %21

======== SOURCE ========
fn(t: Ty): int {
	t.a -= 2
	t.b += 1
	return t.a - t.b
}
======== UNSCHEDULED SON ========
%11 = CInt: 2 [, %13]
%15 = CInt: 1 [, %17]
%8 = CInt: 8 [, %9]
%16 = Load: %14, %9 [, %17]
%13 = BinOp: isub, %12, %11 [, %14]
%12 = Load: %10, %4 [, %13]
%4 = Local: 16, %2 [, %6, %9, %19, %12, %14]
%7 = Arg: 1, %0 [, %10]
%5 = Arg: 0, %0 [, %6]
%2 = Mem: %0 [, %6, %4]
%20 = Load: %18, %9 [, %21]
%19 = Load: %18, %4 [, %21]
%17 = BinOp: iadd, %16, %15 [, %18]
%9 = BinOp: iadd, %4, %8 [, %10, %16, %18, %20]
%14 = Store: %1, %10, %4, %13 [, %18, %16]
%10 = Store: %1, %6, %9, %7 [, %14, %12]
%6 = Store: %1, %2, %4, %5 [, %10]
%0 = Start: idepth: 0 [, %1, %2, %5, %7]
%21 = BinOp: isub, %19, %20 [, %22]
%18 = Store: %1, %14, %9, %17 [, %22, %19, %20]
%1 = Entry: idepth: 0, %0 [, %22, %6, %10, %14, %18]
%22 = Return: idepth: 0, %1, %18, %21 []

======== OPTIMIZED SON ========
%27 = Ld: offset: 8, %14, %4 [, %24]
%23 = ImmBinOp: imm: -2, op: addi64, %12 [, %14]
%12 = Load: %28, %4 [, %23]
%7 = Arg: 1, %0 [, %28]
%5 = Arg: 0, %0 [, %6]
%2 = Mem: %0 [, %6, %4]
%26 = Ld: offset: 8, %29, %4 [, %21]
%19 = Load: %29, %4 [, %21]
%24 = ImmBinOp: imm: 1, op: addi64, %27 [, %29]
%4 = Local: 16, %2 [, %6, %29, %19, %12, %14, %26, %27, %28]
%14 = Store: %1, %28, %4, %23 [, %29, %27]
%28 = St: offset: 8, %1, %6, %4, %7 [, %14, %12]
%6 = Store: %1, %2, %4, %5 [, %28]
%0 = Start: idepth: 0 [, %1, %2, %5, %7]
%21 = BinOp: isub, %19, %26 [, %22]
%29 = St: offset: 8, %1, %14, %4, %24 [, %22, %19, %26]
%1 = Entry: idepth: 0, %0 [, %6, %28, %14, %29, %22]
%22 = Return: idepth: 0, %1, %29, %21 []

======== SCHEDULED SON ========
%0 = Start: idepth: 0
%1 = Entry: idepth: 1, %0
  %5 = Arg: 0
  %7 = Arg: 1
  %4 = Local: 16, %2
  %6 = Store: %2, %4, %5
  %28 = St: offset: 8, %6, %4, %7
  %12 = Load: %28, %4
  %23 = ImmBinOp: imm: -2, op: addi64, %12
  %14 = Store: %28, %4, %23, %12
  %27 = Ld: offset: 8, %14, %4
  %24 = ImmBinOp: imm: 1, op: addi64, %27
  %29 = St: offset: 8, %14, %4, %24, %27
  %19 = Load: %29, %4
  %26 = Ld: offset: 8, %29, %4
  %21 = BinOp: isub, %19, %26
  %22 = Return: idepth: 0, %29, %21

======== SOURCE ========
fn(t: Ty2): Ty2 {
	return t
}
======== UNSCHEDULED SON ========
%6 = CInt: 24 [, %7]
%5 = Arg: 1, %0 [, %7]
%4 = Arg: 0, %0 [, %7]
%2 = Mem: %0 [, %7]
%0 = Start: idepth: 0 [, %1, %2, %4, %5]
%7 = MemCpy: %1, %2, %4, %5, %6 [, %8]
%1 = Entry: idepth: 0, %0 [, %8, %7]
%8 = Return: idepth: 0, %1, %7 []

======== OPTIMIZED SON ========
%5 = Arg: 1, %0 [, %9]
%4 = Arg: 0, %0 [, %9]
%2 = Mem: %0 [, %9]
%0 = Start: idepth: 0 [, %1, %2, %4, %5]
%9 = BlockCpy: size: 24, %1, %2, %4, %5 [, %8]
%1 = Entry: idepth: 0, %0 [, %9, %8]
%8 = Return: idepth: 0, %1, %9 []

======== SCHEDULED SON ========
%0 = Start: idepth: 0
%1 = Entry: idepth: 1, %0
  %4 = Arg: 0
  %5 = Arg: 1
  %9 = BlockCpy: size: 24, %2, %4, %5
  %8 = Return: idepth: 0, %9

======== CODEGEN ========
main:
         st $31, $254, -56, 56
     addi64 $254, $254, -104
       li64 $32, 4
       li64 $33, 1
       li64 $34, 3
     addi64 $35, $254, 0
         st $32, $254, 0, 8
         st $33, $254, 8, 8
         st $34, $254, 16, 8
     addi64 $32, $254, 24
         cp $1, $32
         cp $2, $35
        jal $31, $0, :odher_pass
       li64 $33, 0
         ld $35, $254, 40, 8
         ld $36, $254, 24, 8
         ld $37, $254, 32, 8
        jeq $35, $34, :1
         cp $32, $33
        jmp :2
1:       cp $2, $36
         cp $3, $37
        jal $31, $0, :sum
         cp $34, $1
        jeq $34, $33, :4
       li64 $32, 100
2:      jmp :5
4:       cp $2, $32
        jal $31, $0, :pass
         cp $32, $1
5:       cp $1, $32
     addi64 $254, $254, 104
         ld $31, $254, -56, 56
         tx
pass:
         cp $13, $2
         ld $14, $13, 0, 8
     addi64 $14, $14, -1
         st $14, $13, 0, 8
         ld $14, $13, 0, 8
     addi64 $14, $14, 1
         st $14, $13, 0, 8
         ld $14, $13, 0, 8
         ld $13, $13, 8, 8
      sub64 $13, $14, $13
         cp $1, $13
       jala $0, $31, 0
sum:
     addi64 $254, $254, -16
         cp $13, $2
         cp $14, $3
     addi64 $15, $254, 0
         st $13, $254, 0, 8
         st $14, $254, 8, 8
         ld $13, $254, 0, 8
     addi64 $13, $13, -2
         st $13, $254, 0, 8
         ld $13, $254, 8, 8
     addi64 $13, $13, 1
         st $13, $254, 8, 8
         ld $13, $254, 0, 8
         ld $14, $254, 8, 8
      sub64 $13, $13, $14
         cp $1, $13
     addi64 $254, $254, 16
       jala $0, $31, 0
odher_pass:
         cp $13, $1
         cp $14, $2
        bmc $14, $13, 24
       jala $0, $31, 0

======== EXECUTION ========
      st $31=0, $254=10240, -56, 56
  addi64 $254=10240, $254, -104
    li64 $32=0, 4
    li64 $33=0, 1
    li64 $34=0, 3
  addi64 $35=0, $254=10136, 0
      st $32=4, $254=10136, 0, 8
      st $33=1, $254=10136, 8, 8
      st $34=3, $254=10136, 16, 8
  addi64 $32=4, $254=10136, 24
      cp $1=0, $32=10160
      cp $2=0, $35=10136
     jal $31=0, $0=0, 450
      cp $13=0, $1=10160
      cp $14=0, $2=10136
     bmc $14=10136, $13=10160, 24
    jala $0=0, $31=128, 0
    li64 $33=1, 0
      ld $35=10136, $254=10136, 40, 8
      ld $36=0, $254=10136, 24, 8
      ld $37=0, $254=10136, 32, 8
     jeq $35=3, $34=3, 13
      cp $2=10136, $36=4
      cp $3=0, $37=1
     jal $31=128, $0=0, 192
  addi64 $254=10136, $254, -16
      cp $13=10160, $2=4
      cp $14=10136, $3=1
  addi64 $15=0, $254=10120, 0
      st $13=4, $254=10120, 0, 8
      st $14=1, $254=10120, 8, 8
      ld $13=4, $254=10120, 0, 8
  addi64 $13=4, $13, -2
      st $13=2, $254=10120, 0, 8
      ld $13=2, $254=10120, 8, 8
  addi64 $13=1, $13, 1
      st $13=2, $254=10120, 8, 8
      ld $13=2, $254=10120, 0, 8
      ld $14=1, $254=10120, 8, 8
   sub64 $13=2, $13, $14=2
      cp $1=10160, $13=0
  addi64 $254=10120, $254, 16
    jala $0=0, $31=203, 0
      cp $34=3, $1=0
     jeq $34=0, $33=0, 20
      cp $2=4, $32=10160
     jal $31=203, $0=0, 38
      cp $13=0, $2=10160
      ld $14=2, $13=10160, 0, 8
  addi64 $14=4, $14, -1
      st $14=3, $13=10160, 0, 8
      ld $14=3, $13=10160, 0, 8
  addi64 $14=3, $14, 1
      st $14=4, $13=10160, 0, 8
      ld $14=4, $13=10160, 0, 8
      ld $13=10160, $13, 8, 8
   sub64 $13=1, $14=4, $13
      cp $1=0, $13=3
    jala $0=0, $31=236, 0
      cp $32=10160, $1=3
      cp $1=3, $32=3
  addi64 $254=10136, $254, 104
      ld $31=236, $254=10240, -56, 56
      tx